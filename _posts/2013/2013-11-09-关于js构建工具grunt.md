---
layout: post
title: js中的牛：grunt
categories:
- programming
tag:
- grunt
---

从项目开始就一直在往bash里敲的几个命令：`grunt server`。现在简化了，直接`grunt`一下，就可以让app在chrome上跑起来了，总觉得很神奇，一直不知道grunt到底是干了些啥，最早晓得只是知道它和`yeoman`一道的，但具体干啥的呢，知道今天看了一篇神贴，还是觉的自己得码下字，才是自己的货。

## grunt是啥？
一个专门为js提供的构建工具。

## 啥是构建工具？
项目开发时，会有开发分支，部署发布时，会有可以发布的版本，那么对于用js开发的项目，这可发布版本必然是要经过一系列的优化的，也就是通常可以看到的将源文件压缩、合并、测试、删除临时文件呀等等，不管是js文件还是css文件，之后输出。这其中还包括提取业务代码中要依赖什么样的模块等一系列繁琐重复的工作。构建工具就是将这些活干了的，也就是我们认为这些活是被自动完成的。也可以将构建工具理解为通常所说的“自动化工具”。

## 构建工具是如何干活的？
举个最简单的例子，因为是自动化过程对吧，相当于你写一个任务单（也就是通常的`package.json`文件），然后grunt就像个怪兽电力公司里的那个工厂一样，Mike Wazowski（那个大眼仔怪兽）就会按照任务列表里的tasks一项项给你checked的。要注意的是：grunt只负责执行任务，不管你具体任务都干了些什么勾当。

## 那么具体构建流程是怎样？
加入我们这边有一份任务清单：

	clean：删除临时文件
	compress：压缩
	qunit：测试
	concat：合并
	merge：整合
	...

那么任务流程表在grunt工厂里会变成这样，这个流程表就放在了`gruntfile.js`这个文件里了（命名大小写可能不同，但大同小异）：

	task1: clean
	task2: compress/uglify
	task3: qunit
	task4: concat
	task5: merge
	task6: ...

而具体的构建又分为三部分：

1. **transport**：将信息不完备的模块转换为信息完整的模块，命令：`grunt-cmd-transport`
2. ** concat**：合并文件，将一系列文件打包成可发布版本，命令：`grunt-cmd-concat`
3. **minify**：压缩代码（用uglify表示压缩也有道理，因为压缩后代码确实丑化了），命令：`grunt-contrib-uglify`

至于grunt在项目中的运用，等我回头搞定项目之后，有功夫再写写，哦，对了，grunt是基于node.js的。[详情请戳](http://www.infoq.com/cn/articles/GruntJs/)